<!DOCTYPE html>

<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width,initial-scale=1" name="viewport" />
  <!-- Título da página do site -->
  <title>Mensagem enviada — Semeando Amor</title>
  <!--Puxando a referência do ícone do site-->
  <link href="assets/img/identidade/favicon.png" rel="icon" sizes="32x32" type="image/png" />
  <!-- Ícone para iPhone/iPad (aparece ao adicionar o site à tela inicial)  -->
  <link href="assets/img/identidade/favicon.png" rel="apple-touch-icon" />
  <!-- “Puxando o arquivo CSS para fazer a estilização -->
  <link href="assets/css/main.css" rel="stylesheet" />
  <!-- Puxando o arquivo JavaScript para fazer as funcionalidades -->
  <script defer="" src="assets/js/main.js"></script>
  <style>
    .box {
      background: #fff;
      border: 1px solid #eee;
      border-radius: 16px;
      box-shadow: var(--shadow);
      padding: 20px;
      margin: 22px 0
    }
  </style>
  <style>
    /* Escopo: somente sucesso.html */
    .success-wrap {
      min-height: calc(100vh - 140px);
      display: flex;
      align-items: center
    }

    .success-card {
      max-width: 880px;
      margin: 0 auto;
      padding: 28px 28px 32px;
      border-radius: 16px;
      background: #fff;
      border: 1px solid #eee;
      box-shadow: 0 14px 36px rgba(0, 0, 0, .08)
    }

    .success-card h2 {
      font-size: clamp(1.8rem, 3vw, 2.4rem);
      margin: 0 0 12px
    }

    .success-card p {
      margin: 0 0 14px;
      color: #333
    }

    .success-actions {
      margin-top: 14px;
      display: flex;
      justify-content: center
    }
  </style>
</head>

<body id="topo">
  <header class="site-header">
    <div class="container navbar">
      <a class="brand" href="index.html">
        <img alt="Logotipo Semeando Amor" src="assets/img/identidade/logo.png" />
        <span>Semeando Amor</span>
      </a>
      <button aria-label="Abrir menu" class="menu-btn" data-menu="">☰ Menu</button>
      <nav aria-label="Principal">
        <ul>
          <li><a href="index.html">Início</a></li>
          <li><a href="sobre.html">Sobre</a></li>
          <li><a href="doe.html">Doe Aqui</a></li>
          <li><a href="contato.html">Contato</a></li>
        </ul>
      </nav>
    </div>
  </header>
  <main class="container">
    <section class="success-wrap section">
      <div class="success-card center">
        <h2>Mensagem enviada com sucesso! 🎉</h2>
        <p>Obrigado por entrar em contato. Recebemos sua mensagem e retornaremos em breve.</p>
        <div id="local-tools" style="display:none;margin-top:12px">
          <button class="btn sm" id="dlCsv">Baixar CSV local</button>
          <button class="btn sm secondary" id="limpar">Limpar armazenadas</button>
          <p class="helper" id="qtd"></p>
        </div>
        <div class="form-actions success-actions center"><a class="btn" href="index.html">Voltar à página inicial</a>
        </div>
      </div>
    </section>
  </main>

  <script>
    (function () {
      const key = 'sa_submissoes';
      const arr = JSON.parse(localStorage.getItem(key) || '[]');
      if (!isLocal || arr.length === 0) return;
      document.getElementById('local-tools').style.display = 'block';
      document.getElementById('qtd').textContent = arr.length + ' registro(s) salvos localmente.';
      function csvEscape(s) { return ('"' + String(s).replaceAll('"', '""') + '"'); }
      document.getElementById('dlCsv').addEventListener('click', () => {
        const header = ['Data', 'Nome', 'Email', 'Mensagem', 'Consent'];
        const rows = arr.map(o => [o.ts, o.nome, o.email, o.mensagem, o.consent]);
        const csv = [header].concat(rows).map(r => r.map(csvEscape).join(',')).join('\n');
        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8' });
        const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'contatos-local.csv'; a.click();
      });
      document.getElementById('limpar').addEventListener('click', () => { localStorage.removeItem(key); location.reload(); });
    })();
  </script>
</body>

</html>